window.onload = function (e) {
    var items = document.getElementsByClassName("delete_button");
    //console.log(items);
    for (i = 0; i < items.length; i++) {
        items[i].addEventListener("click", function(e){
            var url = "/seacreature/"+ this.id +"/delete";
            var xhr = new XMLHttpRequest();

            xhr.open("DELETE", url, true);
            xhr.onload = function () {
                var info = xhr.responseText;
                if (xhr.readyState == 4 && xhr.status == "200") {
                    //console.log(info);
                    window.location = "/seacreatures";
                } else {
                    console.error(info);
                }
            }
            xhr.send(null);
        });
    }

    var buttons_edit = document.getElementsByClassName("edit_button");
    for (i = 0; i < buttons_edit.length; i++) {
        buttons_edit[i].addEventListener("click", function(e){
            var form = document.forms.namedItem("formCreature");
            var url = "/seacreature/"+ this.id +"/edit";
            var xhr = new XMLHttpRequest();
            var data = new FormData(form);
            xhr.open("PUT", url, true);
            xhr.onload = function () {
                var info = xhr.responseText;
                if (xhr.readyState == 4 && xhr.status == "200") {
                    //console.log(info);
                    window.location = "/seacreatures";
                } else {
                    console.error(info);
                }
            }
            xhr.send(data);
        });
    }
};